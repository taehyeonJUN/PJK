<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mem">

	<select id="memLogin" resultType="com.edu.pjk.Login.MemberVo">
		SELECT MEMAUTHOR 
		  FROM PJK_MEMBER 
		  WHERE memid = #{memId} 
		  		AND memPass = #{memPass} 
		  		AND MEMCHECKDEL = 'N'
	</select>

	<select id="memList" resultType="MemberVo">
	SELECT MEMNO,MEMID, MEMPASS, MEMNAME, MEMJOINDATE, MEMAUTHOR
	FROM PJK_MEMBER
	WHERE MEMCHECKDEL = 'N'
	</select>

	<select id="memSeletOne" parameterType="MemberVo" resultType="MemberVo">
	SELECT MEMID, MEMPASS, MEMNAME, MEMJOINDATE, MEMAUTHOR
	  FROM PJK_MEMBER
	 WHERE MEMCHECKDEL = 'N' AND MEMID = #{memId}
	</select>

	<update id="memEdit1">
		UPDATE PJK_MEMBER
		SET MEMCHECKDEL = 'Y'
		WHERE MEMID = #{memId} AND MEMCHECKDEL = 'N'
	</update>

	<insert id="memEdit2">


		INSERT INTO PJK_MEMBER(MEMNO,MEMID,MEMPASS,MEMNAME,memCount)
		VALUES(SEQ_MEMNO.NEXTVAL,'','','',(
											SELECT memCount
											  FROM PJK_MEMBER
										  	 WHERE memid = #{memId} AND memCheckDel = 'Y')+1)
	</insert>
	
	<insert id="memJoin" parameterType="com.edu.pjk.Login.MemberVo">
		INSERT INTO PJK_MEMBER(MEMNO,MEMID,MEMPASS,MEMNAME) 
	  		 VALUES(SEQ_MEMNO.NEXTVAL, #{memId}, #{memPass}, #{memName})
	</insert>
	
</mapper>